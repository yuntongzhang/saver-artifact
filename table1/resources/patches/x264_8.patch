===== Patch instructions generated by SAVER =====
[+] { Insert: if (true) free(*(open_file:h)) at 28 (line 54, column 5) }
===== Actual patch in diff format =====
--- a/table1/benchmarks/x264/input/thread.c
+++ b/table1/benchmarks/x264/input/thread.c
@@ -51,8 +51,10 @@ typedef struct thread_input_arg_t
 static int open_file( char *psz_filename, hnd_t *p_handle, video_info_t *info, cli_input_opt_t *opt )
 {
     thread_hnd_t *h = malloc( sizeof(thread_hnd_t) );
-    FAIL_IF_ERR( !h || cli_input.picture_alloc( &h->pic, *p_handle, info->csp, info->width, info->height ),
-                 "x264", "malloc failed\n" );
+    if ( !h || cli_input.picture_alloc( &h->pic, *p_handle, info->csp, info->width, info->height )
+        x264_cli_log("x264", "malloc failed\n");
+        free(h);
+        return -1;
     h->input = cli_input;
     h->p_handle = *p_handle;
     h->next_frame = -1;
